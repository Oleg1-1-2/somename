--Создание таблиц приемников
create table HLOV_DWH_FACT_PSSPRT_BLCKLST
(PASSPORT_NUM VARCHAR2(50),
 ENTRY_DT DATE);
 
create table HLOV_DWH_FACT_TRANSACTIONS
(TRANS_ID VARCHAR2(50),
 TRANS_DATE TIMESTAMP,                                     
 CARD_NUM VARCHAR2(50),
 OPER_TYPE VARCHAR2(50),
 AMT DECIMAL(10,2),
 OPER_RESULT VARCHAR2(50),
 TERMINAL VARCHAR2(100));

  
create table HLOV_DWH_DIM_TERMINAL_HIST
(TERMINAL_ID VARCHAR2(50),
 TERMINAL_TYPE VARCHAR2(100),
 TERMINAL_CITY VARCHAR2(100),
 TERMINAL_ADDRESS VARCHAR2(100),
 EFFECTIVE_FROM DATE,
 EFFECTIVE_TO DATE default '5999-12-01',
 DELETED_FLG INT default 0);
   
create table HLOV_DWH_DIM_CARDS_HIST
(CARD_NUM VARCHAR2(20),
 ACCOUNT_NUM VARCHAR2(20),
 EFFECTIVE_FROM DATE,
 EFFECTIVE_TO DATE default '5999-12-01',
 DELETED_FLG INT default 0);
  
create table HLOV_DWH_DIM_ACCOUNTS_HIST
(ACCOUNT_NUM VARCHAR2(20),
 VALID_TO DATE,
 CLIENT	VARCHAR2(20),
 EFFECTIVE_FROM DATE,
 EFFECTIVE_TO DATE default '5999-12-01',
 DELETED_FLG INT default 0);

create table HLOV_DWH_DIM_CLIENTS_HIST
(CLIENT_ID	VARCHAR2(20),
 LAST_NAME VARCHAR2(100),
 FIRST_NAME VARCHAR2(100),
 PATRONYMIC VARCHAR2(100),
 DATE_OF_BIRTH DATE,
 PASSPORT_NUM VARCHAR2(15),
 PASSPORT_VALID_TO DATE,
 PHONE VARCHAR2(20),
 EFFECTIVE_FROM DATE,
 EFFECTIVE_TO DATE default '5999-12-01',
 DELETED_FLG INT default 0);
 
 
-- Создание таблиц stg и delete
 
 create table HLOV_STG_PASSPORT_BLACKLIST
(ENTRY_DT DATE,
 PASSPORT_NUM VARCHAR2(50));
 
create table HLOV_STG_TRANSACTIONS
(TRANS_ID VARCHAR2(50),
 TRANS_DATE TIMESTAMP,                                
 CARD_NUM VARCHAR2(50),
 OPER_TYPE VARCHAR2(50),
 AMT DECIMAL(10,2),
 OPER_RESULT VARCHAR2(50),
 TERMINAL VARCHAR2(100));

create table HLOV_STG_TERMINAL
(TERMINAL_ID VARCHAR2(50),
 TERMINAL_TYPE VARCHAR2(100),
 TERMINAL_CITY VARCHAR2(100),
 TERMINAL_ADDRESS VARCHAR2(100));                              
   
create table HLOV_STG_CARDS
(CARD_NUM VARCHAR2(20),
 ACCOUNT VARCHAR2(20),
 CREATE_DT DATE,
 UPDATE_DT DATE);
  
create table HLOV_STG_ACCOUNTS
(ACCOUNT_NUM VARCHAR2(20),
 VALID_TO DATE,
 CLIENT	VARCHAR2(20),
 CREATE_DT DATE,
 UPDATE_DT DATE);

create table HLOV_STG_CLIENTS
(CLIENT_ID	VARCHAR2(20),
 LAST_NAME VARCHAR2(100),
 FIRST_NAME VARCHAR2(100),
 PATRONYMIC VARCHAR2(100),
 DATE_OF_BIRTH DATE,
 PASSPORT_NUM VARCHAR2(15),
 PASSPORT_VALID_TO DATE,
 PHONE VARCHAR2(20),
 CREATE_DT DATE,
 UPDATE_DT DATE);

-- Создание таблиц stg и delete
create table HLOV_STG_DELETE_CARDS
(CARD_NUM VARCHAR2(20));
 
create table HLOV_STG_DELETE_ACCOUNTS
(ACCOUNT_NUM VARCHAR2(20));
 
create table HLOV_STG_DELETE_CLIENTS
(CLIENT_ID	VARCHAR2(20));

create table HLOV_STG_DELETE_TERMINAL
(TERMINAL_ID VARCHAR2(50));

-- мета таблицы
create table HLOV_META_PASSPORT_BLACKLIST
  (LAST_UPDATE_DT DATE);
  
  create table HLOV_META_TRANSACTIONS
  (LAST_UPDATE_DT DATE);
  
  
  create table HLOV_META_CARDS
  (LAST_UPDATE_DT DATE);
  
  create table HLOV_META_ACCOUNTS
  (LAST_UPDATE_DT DATE);
  
  create table HLOV_META_CLIENTS
  (LAST_UPDATE_DT DATE);
 

 --создание таблицы с отчетом
 create table HLOV_REP_FRAUD
 (EVENT_DT TIMESTAMP,
 PASSPORT VARCHAR2(20),
 FIO VARCHAR2(150),
 PHONE VARCHAR2(20),
 EVENT_TYPE VARCHAR2(100),
 REPORT_DT DATE);


